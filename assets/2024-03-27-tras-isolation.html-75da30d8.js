import{_ as a}from"./plugin-vue_export-helper-c27b6911.js";import{o as e,c as s,f as n}from"./app-28e7b64a.js";const i={},l=n(`<h2 id="事务的隔离级别" tabindex="-1"><a class="header-anchor" href="#事务的隔离级别" aria-hidden="true">#</a> 事务的隔离级别</h2><p>事务的隔离级别是指多个并发执行的事务之间的隔离程度，不同的隔离级别提供了不同的并发控制机制，以确保事务在并发执行时不会产生不一致的结果。常见的隔离级别包括：</p><ol><li><p><strong>读未提交（Read Uncommitted）</strong>：最低的隔离级别，在该级别下，一个事务可以看到其他事务未提交的修改。这意味着在一个事务中可以读取到其他事务尚未提交的数据，可能导致脏读、不可重复读和幻读问题。</p></li><li><p><strong>读已提交（Read Committed）</strong>：在该隔离级别下，一个事务只能看到其他事务已经提交的修改。这可以避免脏读问题，但仍可能出现不可重复读和幻读问题。</p></li><li><p><strong>可重复读（Repeatable Read）</strong>：在该隔离级别下，一个事务在执行期间多次读取同一行数据时，会看到相同的数据，即使其他事务已经对该数据进行了修改。这可以避免脏读和不可重复读问题，但仍可能出现幻读问题。</p></li><li><p><strong>串行化（Serializable）</strong>：提供最高的隔离级别，通过对事务进行串行化执行来避免并发问题，即每个事务都按顺序执行，因此不会发生并发问题。这可以避免脏读、不可重复读和幻读问题，但会降低并发性能。</p></li></ol><h2 id="mysql默认的事务隔离级别" tabindex="-1"><a class="header-anchor" href="#mysql默认的事务隔离级别" aria-hidden="true">#</a> Mysql默认的事务隔离级别</h2><p>MySQL 默认的隔离级别是<strong>可重复读（Repeatable Read）</strong>。</p><h2 id="怎么查看默认的事务隔离级别" tabindex="-1"><a class="header-anchor" href="#怎么查看默认的事务隔离级别" aria-hidden="true">#</a> 怎么查看默认的事务隔离级别</h2><p>查看 MySQL 5.7事务的隔离级别，可以执行以下 SQL 查询：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> @<span class="token variable">@global.tx_isolation</span> <span class="token keyword">AS</span> <span class="token string">&#39;Global Isolation Level&#39;</span><span class="token punctuation">,</span>
       @<span class="token variable">@session.tx_isolation</span> <span class="token keyword">AS</span> <span class="token string">&#39;Session Isolation Level&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>查看MySQL 5.8事务的隔离级别，可以执行以下 SQL 查询：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>SELECT @@global.transaction_isolation AS &#39;Global Isolation Level&#39;, @@session.transaction_isolation AS &#39;Session Isolation Level&#39;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://static-1254191423.cos.ap-shanghai.myqcloud.com/img/2024/3/23/image-20240323225929035.png" alt="image-20240323225929035" tabindex="0" loading="lazy"><figcaption>image-20240323225929035</figcaption></figure><h2 id="修改事务的隔离级别" tabindex="-1"><a class="header-anchor" href="#修改事务的隔离级别" aria-hidden="true">#</a> 修改事务的隔离级别</h2><p><strong>修改当前会话</strong></p><p>要修改当前会话（连接）的事务隔离级别，可以使用以下 SQL 语句：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SET</span> <span class="token keyword">SESSION</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">ISOLATION</span> <span class="token keyword">LEVEL</span> isolation_level<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>其中，<code>isolation_level</code> 是要设置的隔离级别，可以是以下值之一：</p><ul><li><code>READ UNCOMMITTED</code></li><li><code>READ COMMITTED</code></li><li><code>REPEATABLE READ</code></li><li><code>SERIALIZABLE</code></li></ul><p>例如，要将当前会话的隔离级别设置为可重复读（Repeatable Read），可以执行以下命令：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SET</span> <span class="token keyword">SESSION</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">ISOLATION</span> <span class="token keyword">LEVEL</span> <span class="token keyword">REPEATABLE</span> <span class="token keyword">READ</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>请注意，修改隔离级别只会影响当前会话，对其他会话不会产生影响。</p><figure><img src="https://static-1254191423.cos.ap-shanghai.myqcloud.com/img/2024/3/23/image-20240323230638902.png" alt="image-20240323230638902" tabindex="0" loading="lazy"><figcaption>image-20240323230638902</figcaption></figure><p><strong>全局修改</strong></p><p>如果需要全局修改，可以执行以下命令：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>SET GLOBAL TRANSACTION ISOLATION LEVEL isolation_level;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>比如：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>mysql&gt; SET GLOBAL TRANSACTION ISOLATION LEVEL READ COMMITTED;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; SET GLOBAL TRANSACTION ISOLATION LEVEL REPEATABLE READ;
Query OK, 0 rows affected (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://static-1254191423.cos.ap-shanghai.myqcloud.com/img/common/wxcode.png" alt="方志朋_官方公众号" tabindex="0" loading="lazy"><figcaption>方志朋_官方公众号</figcaption></figure>`,27),o=[l];function t(d,c){return e(),s("div",null,o)}const g=a(i,[["render",t],["__file","2024-03-27-tras-isolation.html.vue"]]);export{g as default};
